
<!-- Reusable property card component -->
<div class="card shadow-sm h-100 d-flex flex-column position-relative">
  {% if is_featured %}
  <span class="badge bg-bd-primary position-absolute top-0 end-0 m-2">⭐</span>
  {% endif %}

  {% if listing.photo_main %}
    <img src="{{ listing.photo_main.url }}" class="card-img-top" style="height:225px; object-fit:cover;">
  {% elif listing.images.all|length > 0 %}
    {% with first_image=listing.images.all.0 %}
      <img src="{{ first_image.image.url }}" class="card-img-top" style="height:225px; object-fit:cover;">
    {% endwith %}
  {% else %}
    <svg class="bd-placeholder-img card-img-top" height="225" width="100%">
      <rect width="100%" height="100%" fill="#55595c"></rect>
      <text x="50%" y="50%" fill="#eceeef" dy=".3em">No Image</text>
    </svg>
  {% endif %}

  <div class="card-body d-flex flex-column">
    <h6 class="mb-2">{{ listing.title }}</h6>
    <p class="card-text mb-2 text-muted small">
      {{ listing.city }}, {{ listing.state }} <br>
      <strong>₹{{ listing.price|floatformat:0 }}</strong>
    </p>

    <p class="card-text mb-3" style="min-height:3.5rem; max-height:3.5rem; overflow:hidden;">
      <small>{{ listing.description|truncatewords:18 }}</small>
    </p>

    <div class="mt-auto d-flex justify-content-between align-items-center">
      <a href="{% url 'listing_detail' listing.id %}" class="btn btn-sm btn-bd-primary">View</a>
      <small class="text-muted">
        {{ listing.bedrooms }} bed • {{ listing.bathrooms }} bath • {{ listing.garage }} car
      </small>
    </div>
  </div>
</div>
